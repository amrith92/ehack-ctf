var CookieManager={getItem:function(a){if(!a||!this.hasItem(a)){return null}return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))},setItem:function(a,d,b,c,g,e){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a)){return}var f="";if(b){switch(b.constructor){case Number:f=b===Infinity?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+b;break;case String:f="; expires="+b;break;case Date:f="; expires="+b.toGMTString();break}}document.cookie=escape(a)+"="+escape(d)+f+(g?"; domain="+g:"")+(c?"; path="+c:"")+(e?"; secure":"")},removeItem:function(a,b){if(!a||!this.hasItem(a)){return}document.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(b?"; path="+b:"")},hasItem:function(a){return(new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var b=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var a=0;a<b.length;a++){b[a]=unescape(b[a])}return b}};
var bb={success:0,error:0,blackberryTimeoutId:-1};function handleBlackBerryLocationTimeout(){if(bb.blackberryTimeoutId!=-1){bb.error({message:"Timeout error",code:3})}}function handleBlackBerryLocation(){clearTimeout(bb.blackberryTimeoutId);bb.blackberryTimeoutId=-1;if(bb.success&&bb.error){if(blackberry.location.latitude==0&&blackberry.location.longitude==0){bb.error({message:"Position unavailable",code:2})}else{var a=null;if(blackberry.location.timestamp){a=new Date(blackberry.location.timestamp)}bb.success({timestamp:a,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}bb.success=null;bb.error=null}}var geoPosition=function(){var a={};var c=null;var b="undefined";var d="http://freegeoip.net/json/?callback=JSONPCallback";a.getCurrentPosition=function(f,e,g){c.getCurrentPosition(f,e,g)};a.jsonp={callbackCounter:0,fetch:function(h,g){var e="JSONPCallback_"+this.callbackCounter++;window[e]=this.evalJSONP(g);h=h.replace("=JSONPCallback","="+e);var f=document.createElement("SCRIPT");f.src=h;document.getElementsByTagName("HEAD")[0].appendChild(f)},evalJSONP:function(e){return function(f){e(f)}}};a.confirmation=function(){return confirm("This Webpage wants to track your physical location.\nDo you allow it?")};a.init=function(){try{var g=typeof(navigator.geolocation)!=b;if(!g){if(!a.confirmation()){return false}}if((typeof(geoPositionSimulator)!=b)&&(geoPositionSimulator.length>0)){c=geoPositionSimulator}else{if(typeof(bondi)!=b&&typeof(bondi.geolocation)!=b){c=bondi.geolocation}else{if(g){c=navigator.geolocation;a.getCurrentPosition=function(h,e,i){function j(k){var l;if(typeof(k.latitude)!=b){l={timestamp:k.timestamp,coords:{latitude:k.latitude,longitude:k.longitude}}}else{l=k}h(l)}c.getCurrentPosition(j,e,i)}}else{if(typeof(window.blackberry)!=b&&blackberry.location.GPSSupported){if(typeof(blackberry.location.setAidMode)==b){return false}blackberry.location.setAidMode(2);a.getCurrentPosition=function(h,e,i){bb.success=h;bb.error=e;if(i.timeout){bb.blackberryTimeoutId=setTimeout("handleBlackBerryLocationTimeout()",i.timeout)}else{bb.blackberryTimeoutId=setTimeout("handleBlackBerryLocationTimeout()",60000)}blackberry.location.onLocationUpdate("handleBlackBerryLocation()");blackberry.location.refreshLocation()};c=blackberry.location}else{if(typeof(Mojo)!=b&&typeof(Mojo.Service.Request)!="Mojo.Service.Request"){c=true;a.getCurrentPosition=function(h,e,i){parameters={};if(i){if(i.enableHighAccuracy&&i.enableHighAccuracy==true){parameters.accuracy=1}if(i.maximumAge){parameters.maximumAge=i.maximumAge}if(i.responseTime){if(i.responseTime<5){parameters.responseTime=1}else{if(i.responseTime<20){parameters.responseTime=2}else{parameters.timeout=3}}}}r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(j){h({timestamp:j.timestamp,coords:{latitude:j.latitude,longitude:j.longitude,heading:j.heading}})},onFailure:function(j){if(j.errorCode==1){e({code:3,message:"Timeout"})}else{if(j.errorCode==2){e({code:2,message:"Position unavailable"})}else{e({code:0,message:"Unknown Error: webOS-code"+errorCode})}}}})}}else{if(typeof(device)!=b&&typeof(device.getServiceObject)!=b){c=device.getServiceObject("Service.Location","ILocation");a.getCurrentPosition=function(h,e,i){function k(l,m,n){if(m==4){e({message:"Position unavailable",code:2})}else{h({timestamp:null,coords:{latitude:n.ReturnValue.Latitude,longitude:n.ReturnValue.Longitude,altitude:n.ReturnValue.Altitude,heading:n.ReturnValue.Heading}})}}var j=new Object();j.LocationInformationClass="BasicLocationInformation";c.ILocation.GetLocation(j,k)}}else{a.getCurrentPosition=function(h,e,i){a.jsonp.fetch(d,function(j){h({timestamp:j.timestamp,coords:{latitude:j.latitude,longitude:j.longitude,heading:j.heading}})})};c=true}}}}}}}catch(f){if(typeof(console)!=b){console.log(f)}return false}return c!=null};return a}();