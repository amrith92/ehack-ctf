var CookieManager={getItem:function(a){if(!a||!this.hasItem(a)){return null}return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))},setItem:function(e,a,d,g,b,f){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e)){return}var c="";if(d){switch(d.constructor){case Number:c=d===Infinity?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+d;break;case String:c="; expires="+d;break;case Date:c="; expires="+d.toGMTString();break}}document.cookie=escape(e)+"="+escape(a)+c+(b?"; domain="+b:"")+(g?"; path="+g:"")+(f?"; secure":"")},removeItem:function(a,b){if(!a||!this.hasItem(a)){return}document.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(b?"; path="+b:"")},hasItem:function(a){return(new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var b=0;b<a.length;b++){a[b]=unescape(a[b])}return a}};
var bb={success:0,error:0,blackberryTimeoutId:-1};function handleBlackBerryLocationTimeout(){if(bb.blackberryTimeoutId!=-1){bb.error({message:"Timeout error",code:3})}}function handleBlackBerryLocation(){clearTimeout(bb.blackberryTimeoutId);bb.blackberryTimeoutId=-1;if(bb.success&&bb.error){if(blackberry.location.latitude==0&&blackberry.location.longitude==0){bb.error({message:"Position unavailable",code:2})}else{var a=null;if(blackberry.location.timestamp){a=new Date(blackberry.location.timestamp)}bb.success({timestamp:a,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}bb.success=null;bb.error=null}}var geoPosition=function(){var d={};var a=null;var c="undefined";var b="http://freegeoip.net/json/?callback=JSONPCallback";d.getCurrentPosition=function(g,e,f){a.getCurrentPosition(g,e,f)};d.jsonp={callbackCounter:0,fetch:function(f,e){var h="JSONPCallback_"+this.callbackCounter++;window[h]=this.evalJSONP(e);f=f.replace("=JSONPCallback","="+h);var g=document.createElement("SCRIPT");g.src=f;document.getElementsByTagName("HEAD")[0].appendChild(g)},evalJSONP:function(e){return function(f){e(f)}}};d.confirmation=function(){return confirm("This Webpage wants to track your physical location.\nDo you allow it?")};d.init=function(){try{var g=typeof(navigator.geolocation)!=c;if(!g){if(!d.confirmation()){return false}}if((typeof(geoPositionSimulator)!=c)&&(geoPositionSimulator.length>0)){a=geoPositionSimulator}else{if(typeof(bondi)!=c&&typeof(bondi.geolocation)!=c){a=bondi.geolocation}else{if(g){a=navigator.geolocation;d.getCurrentPosition=function(j,e,h){function i(l){var k;if(typeof(l.latitude)!=c){k={timestamp:l.timestamp,coords:{latitude:l.latitude,longitude:l.longitude}}}else{k=l}j(k)}a.getCurrentPosition(i,e,h)}}else{if(typeof(window.blackberry)!=c&&blackberry.location.GPSSupported){if(typeof(blackberry.location.setAidMode)==c){return false}blackberry.location.setAidMode(2);d.getCurrentPosition=function(i,e,h){bb.success=i;bb.error=e;if(h.timeout){bb.blackberryTimeoutId=setTimeout("handleBlackBerryLocationTimeout()",h.timeout)}else{bb.blackberryTimeoutId=setTimeout("handleBlackBerryLocationTimeout()",60000)}blackberry.location.onLocationUpdate("handleBlackBerryLocation()");blackberry.location.refreshLocation()};a=blackberry.location}else{if(typeof(Mojo)!=c&&typeof(Mojo.Service.Request)!="Mojo.Service.Request"){a=true;d.getCurrentPosition=function(i,e,h){parameters={};if(h){if(h.enableHighAccuracy&&h.enableHighAccuracy==true){parameters.accuracy=1}if(h.maximumAge){parameters.maximumAge=h.maximumAge}if(h.responseTime){if(h.responseTime<5){parameters.responseTime=1}else{if(h.responseTime<20){parameters.responseTime=2}else{parameters.timeout=3}}}}r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(j){i({timestamp:j.timestamp,coords:{latitude:j.latitude,longitude:j.longitude,heading:j.heading}})},onFailure:function(j){if(j.errorCode==1){e({code:3,message:"Timeout"})}else{if(j.errorCode==2){e({code:2,message:"Position unavailable"})}else{e({code:0,message:"Unknown Error: webOS-code"+errorCode})}}}})}}else{if(typeof(device)!=c&&typeof(device.getServiceObject)!=c){a=device.getServiceObject("Service.Location","ILocation");d.getCurrentPosition=function(k,i,j){function h(l,n,m){if(n==4){i({message:"Position unavailable",code:2})}else{k({timestamp:null,coords:{latitude:m.ReturnValue.Latitude,longitude:m.ReturnValue.Longitude,altitude:m.ReturnValue.Altitude,heading:m.ReturnValue.Heading}})}}var e=new Object();e.LocationInformationClass="BasicLocationInformation";a.ILocation.GetLocation(e,h)}}else{d.getCurrentPosition=function(i,e,h){d.jsonp.fetch(b,function(j){i({timestamp:j.timestamp,coords:{latitude:j.latitude,longitude:j.longitude,heading:j.heading}})})};a=true}}}}}}}catch(f){if(typeof(console)!=c){console.log(f)}return false}return a!=null};return d}();